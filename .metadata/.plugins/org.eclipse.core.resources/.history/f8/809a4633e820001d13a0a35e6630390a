package com.unosquare.qachallenge;

import java.util.List;

import org.openqa.selenium.By;
import org.openqa.selenium.Dimension;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.WebElement;

public class xboxPage extends Base{

	public xboxPage(WebDriver driver) {
		super(driver);
		// TODO Auto-generated constructor stub
	}
	
	//Locators
	By windowsLinkLocator = By.id("shellmenu_2");
	By windowsPageLocator = By.cssSelector("button[id='uhfCatLogoButton'][aria-label='Windows']");	
	By searchBtnLocator = By.cssSelector("button[id='search']");	
	By searchTxtBoxLocator = By.id("cli_shellHeaderSearchInput");
	
	By xboxPageLocator = By.xpath("//h2[contains(text(),'Consolas Xbox, juegos y mucho más')]");
	By buynowBtnLocator = By.linkText("Comprar");
	By showAppsBtnLocator = By.cssSelector("a[href*='https://www.microsoft.com/es-mx/search/shop/apps?q=Xbox']");
			
	By appsLocator = By.xpath("//div[@class='m-channel-placement-item']");
			
			
	
	/*
	By registerLinkLocator = By.linkText("REGISTER");
	By registerPageLocator = By.xpath("//img[@src='uhfCatLogoButton']");
	By userNameLocator = By.id("email");
	By passwordLocator = By.name("password");
	By confirmPswLocator = By.cssSelector("input[name='confirmPassword']");
	By registerBtnLocator = By.name("submit");
	
	By registeredMessage = By.tagName("font"); //We will use a List of elements and find all the ones that has font ... check registeedMessage
	*/
	
	public void goToXboxShop() {
		click(windowsLinkLocator); // click in the link to go to Windows page
		wait(5); //Sleep 5 sec	
		List<WebElement> resultList = findElements(windowsPageLocator);	// find out if a WebElement is present	
		if(resultList.size()>0){ //Are we in windows page?
			click(searchBtnLocator);
			sendKeys("Xbox\n",searchTxtBoxLocator);
			xboxShop();
		} else { //element was not found in the page
			System.out.println("Windows page was not found"); 
		}
	}
	
	public void xboxShop() {
		wait(5); //Sleep 5 sec
		List<WebElement> resultList = findElements(xboxPageLocator);	// find out if a WebElement is present
		if(resultList.size()>0){ //Are we in Xbox page?
			click(buynowBtnLocator);
			click(showAppsBtnLocator);
			int sumElements=0;
			for (int i = 0; i < 2; i++) {
				resultList = findElements(xboxPageLocator);
				sumElements += resultList.size();				
			}
			System.out.println("Total App in the first 3 pages is: " + sumElements);
			
			
			
		} else { //element was not found in the page
			System.out.println("Xbox shop page was not found"); //sending message to console
		}
	}
	
	
}
